const POST_MESSAGE_PARAMS={sendOrderInfo:"paypalSendOrderInfo",paypalApprovedOrder:"paypalApprovedOrder",paypalCloseCreditForm:"paypalCloseCreditForm",paypalOpenCreditForm:"paypalOpenCreditForm",paypalOpenPopup:"paypalOpenPopup",paypalClosePopup:"paypalClosePopup",isValidForm:"isValidForm",checkForm:"checkForm",loaded:"loaded"},CURRENCY_CODE="USD",PAYPAL_BUTTON_ELEMENT_ID="#paypal-button-container",FORM_INFO_INTERFACE={email:"email",address:"addressDetail",apartment:"apartment",city:"city",country:"country",countryCode:"countryCode",firstName:"firstName",lastName:"lastName",phoneNumber:"phoneNumber",province:"province",zipCode:"zipCode"};
const helper={postMessage:function(e,s,n="*"){parent.postMessage({name:e,params:s},n)},isset:function(e){return!!(Array.isArray(e)&&0<e.length||e)}};
const Event={listener:{message:function(){window.addEventListener?window.addEventListener("message",handler.receiverMessage):window.attachEvent("onmessage",handler.receiverMessage)}},run:{resizeCreditForm:function(){},generatePaypalButton:function(){var e=window.expressCheckout;paypal.Buttons({createOrder:e?handler.createOrderExpressCheckout:handler.createOrder,onApprove:handler.onApprove,onInit:handler.onInit,onClick:handler.onClick,onCancel:handler.onCancel,onError:handler.onError}).render(PAYPAL_BUTTON_ELEMENT_ID)},onLoad:function(){handler.onLoad()}}};window.onload=function(){Event.run.resizeCreditForm(),Event.run.generatePaypalButton(),Event.run.onLoad(),Event.listener.message()};
const handler={createOrderExpressCheckout:function(e,a){var o=model.get.formInfo()["totalPrice"];return a.order.create({purchase_units:[{amount:{value:o}}]})},createOrder:function(e,a){var o=model.get.formInfo(),r=o["shippingInfo"],o=o["totalPrice"],t={email_address:r[FORM_INFO_INTERFACE.email],name:{surname:r[FORM_INFO_INTERFACE.lastName],given_name:r[FORM_INFO_INTERFACE.firstName]}},n=[],s={brand_name:"merchant",user_action:"CONTINUE"},o=(helper.isset(r[FORM_INFO_INTERFACE.country])&&helper.isset(r[FORM_INFO_INTERFACE.city])?t.address={country_code:r[FORM_INFO_INTERFACE.countryCode],address_line1:r[FORM_INFO_INTERFACE.address],address_line2:r[FORM_INFO_INTERFACE.apartment],admin_area_1:r[FORM_INFO_INTERFACE.province],admin_area_2:r[FORM_INFO_INTERFACE.city],postal_code:r[FORM_INFO_INTERFACE.zipCode]}:s.shipping_preference="NO_SHIPPING",helper.isset(r[FORM_INFO_INTERFACE.phoneNumber])&&(t.phone={phone_type:"HOME",phone_number:{national_number:r[FORM_INFO_INTERFACE.phoneNumber].replace(/[^0-9]+/g,"")}}),n.push({amount:{currency_code:CURRENCY_CODE,value:o},shipping:{address:{country_code:r[FORM_INFO_INTERFACE.countryCode],address_line1:r[FORM_INFO_INTERFACE.address],address_line2:r[FORM_INFO_INTERFACE.apartment],admin_area_1:r[FORM_INFO_INTERFACE.province],admin_area_2:r[FORM_INFO_INTERFACE.city],postal_code:r[FORM_INFO_INTERFACE.zipCode]},name:{full_name:r[FORM_INFO_INTERFACE.firstName]+" "+r[FORM_INFO_INTERFACE.lastName]}}}),a.order.create({intent:"CAPTURE",purchase_units:n,payer:t,application_context:s}));return o},onApprove:function(e,a){return a.order.capture().then(function(e){helper.postMessage(POST_MESSAGE_PARAMS.paypalApprovedOrder,e)})},onInit:function(e,a){window.expressCheckout||a.disable(),model.set.actions(a),setInterval(()=>{helper.postMessage(POST_MESSAGE_PARAMS.isValidForm,"*")},100)},onClick:function(e,a){e=e.fundingSource;if(!window.expressCheckout)return model.get.isValidForm()?void("paypal"==e?(view.hideButton(),helper.postMessage(POST_MESSAGE_PARAMS.paypalOpenPopup,"*")):"card"==e&&setTimeout(()=>{helper.postMessage(POST_MESSAGE_PARAMS.paypalOpenCreditForm,document.querySelector(PAYPAL_BUTTON_ELEMENT_ID).offsetHeight)},3e3)):(helper.postMessage(POST_MESSAGE_PARAMS.checkForm,"*"),a.reject())},onCancel:function(){view.showButton(),helper.postMessage(POST_MESSAGE_PARAMS.paypalClosePopup,"*")},onError:function(){view.showButton(),helper.postMessage(POST_MESSAGE_PARAMS.paypalClosePopup,"*")},onLoad:function(){helper.postMessage(POST_MESSAGE_PARAMS.loaded,"*")},receiverMessage:function(e){"object"==typeof e.data&&e.data.name===POST_MESSAGE_PARAMS.sendOrderInfo&&model.set.formInfo(e.data.params),"object"==typeof e.data&&e.data.name===POST_MESSAGE_PARAMS.isValidForm&&(model.set.isValidForm(e.data.params),e.data.params?model.get.actions().enable():model.get.actions().disable())}};
const view={hideButton:function(){document.querySelector(PAYPAL_BUTTON_ELEMENT_ID).style.display="none"},showButton:function(){document.querySelector(PAYPAL_BUTTON_ELEMENT_ID).style.display="block"}};
const model={initial:{formInfo:{},actions:null,isValidForm:!1},get:{formInfo:function(){return model.initial.formInfo},actions:function(){return model.initial.actions},isValidForm:function(){return model.initial.isValidForm}},set:{formInfo:function(i){model.initial.formInfo=i},actions:function(i){model.initial.actions=i},isValidForm:function(i){model.initial.isValidForm=i}}};